TROFF TOOLS
===========

This is the port of Plan9 troff tools to Linux which probably works
in other Unix variants with minor modifications.  The included
programs are troff, tr2ps (dpost), eqn, tbl, pic, grap, and refer.

SETTING UP
==========

Change TBASE variable conf.mk to point the home folder in this
package.  Then compile everything:

  $ for t in troff tr2ps eqn tbl pic grap refer; do cd $t; make; cd ..; done

You may copy the binaries to a directory in your $PATH.

Then, the output device description file should be generated.  To do
so, change to the mkdev directory and execute mkdev.sh shell script.
This should create the device description file and font description
files of the devutf output device.

TR2PS CHANGES
=============

Each troff font is mapped to exactly one PS font, which is declared as
fontname in the troff font description file.  As a result, tr2ps can
find out the mapping of between troff characters and postscript glyphs
by reading only the troff description files.  UTF8 entries in troff font
files work as before and the first column can be any UTF8 character.
The fifth column, however, denotes glyphs' postscript names if present.
For glyphs not in the 256-entry PS font encoding table, tr2ps uses these
glyph names to output those characters in the generated postscript file.
This makes adding new fonts to troff much easier.

REFER
=====

I included my small refer clone in this package.  It assumes each record
in the database has an 'L' key which specifies the label of the record.
When referencing, only this key is searched among the records in the
database.  A new -m parameter has been added to allow multiple references
in a single .[/.] macro, as white space separated list of labels; refer
tries to use reference intervals if possible.

TODO
====

* Remove the use of lex and yacc in eqn and pic.  I hate lex and yacc
  as much as I like a well written recursive decent parser.
* Some of the tools could be cleaned up considerably
